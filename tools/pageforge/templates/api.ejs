/**
* API hooks for <%= spec.title %>
    * Auto-generated by PageForge
    */

    import { useState, useEffect } from 'react';
    import { httpClient } from '../http';
    import { useAuth } from '../auth';

    <% if (spec.entities && spec.entities[0]) { %>
        export interface <%= pascalCase(spec.entities[0].name) %> {
            id: string;
            <% spec.entities[0].fields.forEach(field=> { %>
                <%= field.key %>: <%= getTypeScriptType(field) %>;
                        <% }); %>
                            createdAt?: string;
                            updatedAt?: string;
                            }

                            export interface Create<%= pascalCase(spec.entities[0].name) %>Request {
                                <% spec.entities[0].fields.forEach(field=> { %>
                                    <% if (field.required) { %>
                                        <%= field.key %>: <%= getTypeScriptType(field) %>;
                                                <% } else { %>
                                                    <%= field.key %>?: <%= getTypeScriptType(field) %>;
                                                            <% } %>
                                                                <% }); %>
                                                                    }

                                                                    export interface Update<%=
                                                                        pascalCase(spec.entities[0].name) %>Request
                                                                        extends Partial<Create<%=
                                                                            pascalCase(spec.entities[0].name) %>Request>
                                                                            {
                                                                            id: string;
                                                                            }

                                                                            export interface <%= pascalCase(spec.id) %>
                                                                                Response {
                                                                                ok: boolean;
                                                                                data?: <%=
                                                                                    pascalCase(spec.entities[0].name) %>
                                                                                    | <%=
                                                                                        pascalCase(spec.entities[0].name)
                                                                                        %>[];
                                                                                        error?: string;
                                                                                        details?: any;
                                                                                        }
                                                                                        <% } else { %>
                                                                                            export interface <%=
                                                                                                pascalCase(spec.id) %>
                                                                                                Item {
                                                                                                id: string;
                                                                                                createdAt?: string;
                                                                                                updatedAt?: string;
                                                                                                }

                                                                                                export interface <%=
                                                                                                    pascalCase(spec.id)
                                                                                                    %>Response {
                                                                                                    ok: boolean;
                                                                                                    data?: <%=
                                                                                                        pascalCase(spec.id)
                                                                                                        %>Item | <%=
                                                                                                            pascalCase(spec.id)
                                                                                                            %>Item[];
                                                                                                            error?:
                                                                                                            string;
                                                                                                            details?:
                                                                                                            any;
                                                                                                            }
                                                                                                            <% } %>

                                                                                                                export
                                                                                                                function
                                                                                                                use<%=
                                                                                                                    pascalCase(spec.id)
                                                                                                                    %>
                                                                                                                    API()
                                                                                                                    {
                                                                                                                    const
                                                                                                                    [data,
                                                                                                                    setData]
                                                                                                                    =
                                                                                                                    useState
                                                                                                                    <<% if
                                                                                                                        (spec.entities
                                                                                                                        &&
                                                                                                                        spec.entities[0])
                                                                                                                        {
                                                                                                                        %>
                                                                                                                        <%= pascalCase(spec.entities[0].name)
                                                                                                                            %>
                                                                                                                            []
                                                                                                                            <% } else
                                                                                                                                {
                                                                                                                                %>
                                                                                                                                <%= pascalCase(spec.id)
                                                                                                                                    %>
                                                                                                                                    Item[]
                                                                                                                                    <% }
                                                                                                                                        %>
                                                                                                                                        >([]);
                                                                                                                                        const
                                                                                                                                        [isLoading,
                                                                                                                                        setIsLoading]
                                                                                                                                        =
                                                                                                                                        useState(false);
                                                                                                                                        const
                                                                                                                                        [error,
                                                                                                                                        setError]
                                                                                                                                        =
                                                                                                                                        useState
                                                                                                                                        <Error
                                                                                                                                            |
                                                                                                                                            null>
                                                                                                                                            (null);
                                                                                                                                            const
                                                                                                                                            {
                                                                                                                                            token
                                                                                                                                            }
                                                                                                                                            =
                                                                                                                                            useAuth();

                                                                                                                                            const
                                                                                                                                            headers
                                                                                                                                            =
                                                                                                                                            {
                                                                                                                                            'Authorization':
                                                                                                                                            `Bearer
                                                                                                                                            ${token}`,
                                                                                                                                            'Content-Type':
                                                                                                                                            'application/json'
                                                                                                                                            };

                                                                                                                                            const
                                                                                                                                            fetchData
                                                                                                                                            =
                                                                                                                                            async
                                                                                                                                            ()
                                                                                                                                            =>
                                                                                                                                            {
                                                                                                                                            try
                                                                                                                                            {
                                                                                                                                            setIsLoading(true);
                                                                                                                                            setError(null);

                                                                                                                                            <% if
                                                                                                                                                (spec.api
                                                                                                                                                &&
                                                                                                                                                spec.api.base)
                                                                                                                                                {
                                                                                                                                                %>
                                                                                                                                                const
                                                                                                                                                response
                                                                                                                                                =
                                                                                                                                                await
                                                                                                                                                httpClient.get('
                                                                                                                                                <%= spec.api.base
                                                                                                                                                    %>
                                                                                                                                                    /list',
                                                                                                                                                    {
                                                                                                                                                    headers
                                                                                                                                                    });

                                                                                                                                                    if
                                                                                                                                                    (response.data.ok)
                                                                                                                                                    {
                                                                                                                                                    setData(response.data.data
                                                                                                                                                    ||
                                                                                                                                                    []);
                                                                                                                                                    }
                                                                                                                                                    else
                                                                                                                                                    {
                                                                                                                                                    throw
                                                                                                                                                    new
                                                                                                                                                    Error(response.data.error
                                                                                                                                                    ||
                                                                                                                                                    'Failed
                                                                                                                                                    to
                                                                                                                                                    fetch
                                                                                                                                                    data');
                                                                                                                                                    }
                                                                                                                                                    <% } else
                                                                                                                                                        {
                                                                                                                                                        %>
                                                                                                                                                        //
                                                                                                                                                        No
                                                                                                                                                        API
                                                                                                                                                        endpoint
                                                                                                                                                        -
                                                                                                                                                        return
                                                                                                                                                        empty
                                                                                                                                                        data
                                                                                                                                                        setData([]);
                                                                                                                                                        <% }
                                                                                                                                                            %>
                                                                                                                                                            }
                                                                                                                                                            catch
                                                                                                                                                            (err)
                                                                                                                                                            {
                                                                                                                                                            setError(err
                                                                                                                                                            as
                                                                                                                                                            Error);
                                                                                                                                                            console.error('Error
                                                                                                                                                            fetching
                                                                                                                                                            <%= spec.id
                                                                                                                                                                %>
                                                                                                                                                                :',
                                                                                                                                                                err);
                                                                                                                                                                }
                                                                                                                                                                finally
                                                                                                                                                                {
                                                                                                                                                                setIsLoading(false);
                                                                                                                                                                }
                                                                                                                                                                };

                                                                                                                                                                <% if
                                                                                                                                                                    (spec.api
                                                                                                                                                                    &&
                                                                                                                                                                    spec.api.base)
                                                                                                                                                                    {
                                                                                                                                                                    %>
                                                                                                                                                                    <% if
                                                                                                                                                                        (spec.entities
                                                                                                                                                                        &&
                                                                                                                                                                        spec.entities[0])
                                                                                                                                                                        {
                                                                                                                                                                        %>
                                                                                                                                                                        const
                                                                                                                                                                        create
                                                                                                                                                                        =
                                                                                                                                                                        async
                                                                                                                                                                        (item:
                                                                                                                                                                        Create
                                                                                                                                                                        <%= pascalCase(spec.entities[0].name)
                                                                                                                                                                            %>
                                                                                                                                                                            Request):
                                                                                                                                                                            Promise
                                                                                                                                                                            <<%= pascalCase(spec.entities[0].name)
                                                                                                                                                                                %>
                                                                                                                                                                                >
                                                                                                                                                                                =>
                                                                                                                                                                                {
                                                                                                                                                                                try
                                                                                                                                                                                {
                                                                                                                                                                                setError(null);

                                                                                                                                                                                const
                                                                                                                                                                                response
                                                                                                                                                                                =
                                                                                                                                                                                await
                                                                                                                                                                                httpClient.post('
                                                                                                                                                                                <%= spec.api.base
                                                                                                                                                                                    %>
                                                                                                                                                                                    /',
                                                                                                                                                                                    item,
                                                                                                                                                                                    {
                                                                                                                                                                                    headers
                                                                                                                                                                                    });

                                                                                                                                                                                    if
                                                                                                                                                                                    (response.data.ok)
                                                                                                                                                                                    {
                                                                                                                                                                                    const
                                                                                                                                                                                    newItem
                                                                                                                                                                                    =
                                                                                                                                                                                    response.data.data;
                                                                                                                                                                                    setData(prev
                                                                                                                                                                                    =>
                                                                                                                                                                                    [...prev,
                                                                                                                                                                                    newItem]);
                                                                                                                                                                                    return
                                                                                                                                                                                    newItem;
                                                                                                                                                                                    }
                                                                                                                                                                                    else
                                                                                                                                                                                    {
                                                                                                                                                                                    throw
                                                                                                                                                                                    new
                                                                                                                                                                                    Error(response.data.error
                                                                                                                                                                                    ||
                                                                                                                                                                                    'Failed
                                                                                                                                                                                    to
                                                                                                                                                                                    create
                                                                                                                                                                                    item');
                                                                                                                                                                                    }
                                                                                                                                                                                    }
                                                                                                                                                                                    catch
                                                                                                                                                                                    (err)
                                                                                                                                                                                    {
                                                                                                                                                                                    setError(err
                                                                                                                                                                                    as
                                                                                                                                                                                    Error);
                                                                                                                                                                                    throw
                                                                                                                                                                                    err;
                                                                                                                                                                                    }
                                                                                                                                                                                    };

                                                                                                                                                                                    const
                                                                                                                                                                                    update
                                                                                                                                                                                    =
                                                                                                                                                                                    async
                                                                                                                                                                                    (id:
                                                                                                                                                                                    string,
                                                                                                                                                                                    item:
                                                                                                                                                                                    Partial
                                                                                                                                                                                    <Create<%=
                                                                                                                                                                                        pascalCase(spec.entities[0].name)
                                                                                                                                                                                        %>
                                                                                                                                                                                        Request>):
                                                                                                                                                                                        Promise
                                                                                                                                                                                        <<%= pascalCase(spec.entities[0].name)
                                                                                                                                                                                            %>
                                                                                                                                                                                            >
                                                                                                                                                                                            =>
                                                                                                                                                                                            {
                                                                                                                                                                                            try
                                                                                                                                                                                            {
                                                                                                                                                                                            setError(null);

                                                                                                                                                                                            const
                                                                                                                                                                                            response
                                                                                                                                                                                            =
                                                                                                                                                                                            await
                                                                                                                                                                                            httpClient.put(`
                                                                                                                                                                                            <%= spec.api.base
                                                                                                                                                                                                %>
                                                                                                                                                                                                /${id}`,
                                                                                                                                                                                                item,
                                                                                                                                                                                                {
                                                                                                                                                                                                headers
                                                                                                                                                                                                });

                                                                                                                                                                                                if
                                                                                                                                                                                                (response.data.ok)
                                                                                                                                                                                                {
                                                                                                                                                                                                const
                                                                                                                                                                                                updatedItem
                                                                                                                                                                                                =
                                                                                                                                                                                                response.data.data;
                                                                                                                                                                                                setData(prev
                                                                                                                                                                                                =>
                                                                                                                                                                                                prev.map(item
                                                                                                                                                                                                =>
                                                                                                                                                                                                item.id
                                                                                                                                                                                                ===
                                                                                                                                                                                                id
                                                                                                                                                                                                ?
                                                                                                                                                                                                updatedItem
                                                                                                                                                                                                :
                                                                                                                                                                                                item));
                                                                                                                                                                                                return
                                                                                                                                                                                                updatedItem;
                                                                                                                                                                                                }
                                                                                                                                                                                                else
                                                                                                                                                                                                {
                                                                                                                                                                                                throw
                                                                                                                                                                                                new
                                                                                                                                                                                                Error(response.data.error
                                                                                                                                                                                                ||
                                                                                                                                                                                                'Failed
                                                                                                                                                                                                to
                                                                                                                                                                                                update
                                                                                                                                                                                                item');
                                                                                                                                                                                                }
                                                                                                                                                                                                }
                                                                                                                                                                                                catch
                                                                                                                                                                                                (err)
                                                                                                                                                                                                {
                                                                                                                                                                                                setError(err
                                                                                                                                                                                                as
                                                                                                                                                                                                Error);
                                                                                                                                                                                                throw
                                                                                                                                                                                                err;
                                                                                                                                                                                                }
                                                                                                                                                                                                };

                                                                                                                                                                                                const
                                                                                                                                                                                                deleteItem
                                                                                                                                                                                                =
                                                                                                                                                                                                async
                                                                                                                                                                                                (id:
                                                                                                                                                                                                string):
                                                                                                                                                                                                Promise
                                                                                                                                                                                                <void>
                                                                                                                                                                                                    =>
                                                                                                                                                                                                    {
                                                                                                                                                                                                    try
                                                                                                                                                                                                    {
                                                                                                                                                                                                    setError(null);

                                                                                                                                                                                                    const
                                                                                                                                                                                                    response
                                                                                                                                                                                                    =
                                                                                                                                                                                                    await
                                                                                                                                                                                                    httpClient.delete(`
                                                                                                                                                                                                    <%= spec.api.base
                                                                                                                                                                                                        %>
                                                                                                                                                                                                        /${id}`,
                                                                                                                                                                                                        {
                                                                                                                                                                                                        headers
                                                                                                                                                                                                        });

                                                                                                                                                                                                        if
                                                                                                                                                                                                        (response.data.ok)
                                                                                                                                                                                                        {
                                                                                                                                                                                                        setData(prev
                                                                                                                                                                                                        =>
                                                                                                                                                                                                        prev.filter(item
                                                                                                                                                                                                        =>
                                                                                                                                                                                                        item.id
                                                                                                                                                                                                        !==
                                                                                                                                                                                                        id));
                                                                                                                                                                                                        }
                                                                                                                                                                                                        else
                                                                                                                                                                                                        {
                                                                                                                                                                                                        throw
                                                                                                                                                                                                        new
                                                                                                                                                                                                        Error(response.data.error
                                                                                                                                                                                                        ||
                                                                                                                                                                                                        'Failed
                                                                                                                                                                                                        to
                                                                                                                                                                                                        delete
                                                                                                                                                                                                        item');
                                                                                                                                                                                                        }
                                                                                                                                                                                                        }
                                                                                                                                                                                                        catch
                                                                                                                                                                                                        (err)
                                                                                                                                                                                                        {
                                                                                                                                                                                                        setError(err
                                                                                                                                                                                                        as
                                                                                                                                                                                                        Error);
                                                                                                                                                                                                        throw
                                                                                                                                                                                                        err;
                                                                                                                                                                                                        }
                                                                                                                                                                                                        };
                                                                                                                                                                                                        <% } else
                                                                                                                                                                                                            {
                                                                                                                                                                                                            %>
                                                                                                                                                                                                            const
                                                                                                                                                                                                            create
                                                                                                                                                                                                            =
                                                                                                                                                                                                            async
                                                                                                                                                                                                            (item:
                                                                                                                                                                                                            any):
                                                                                                                                                                                                            Promise
                                                                                                                                                                                                            <<%= pascalCase(spec.id)
                                                                                                                                                                                                                %>
                                                                                                                                                                                                                Item>
                                                                                                                                                                                                                =>
                                                                                                                                                                                                                {
                                                                                                                                                                                                                try
                                                                                                                                                                                                                {
                                                                                                                                                                                                                setError(null);

                                                                                                                                                                                                                const
                                                                                                                                                                                                                response
                                                                                                                                                                                                                =
                                                                                                                                                                                                                await
                                                                                                                                                                                                                httpClient.post('
                                                                                                                                                                                                                <%= spec.api.base
                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                    /',
                                                                                                                                                                                                                    item,
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                    headers
                                                                                                                                                                                                                    });

                                                                                                                                                                                                                    if
                                                                                                                                                                                                                    (response.data.ok)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                    const
                                                                                                                                                                                                                    newItem
                                                                                                                                                                                                                    =
                                                                                                                                                                                                                    response.data.data;
                                                                                                                                                                                                                    setData(prev
                                                                                                                                                                                                                    =>
                                                                                                                                                                                                                    [...prev,
                                                                                                                                                                                                                    newItem]);
                                                                                                                                                                                                                    return
                                                                                                                                                                                                                    newItem;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    else
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                    new
                                                                                                                                                                                                                    Error(response.data.error
                                                                                                                                                                                                                    ||
                                                                                                                                                                                                                    'Failed
                                                                                                                                                                                                                    to
                                                                                                                                                                                                                    create
                                                                                                                                                                                                                    item');
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    catch
                                                                                                                                                                                                                    (err)
                                                                                                                                                                                                                    {
                                                                                                                                                                                                                    setError(err
                                                                                                                                                                                                                    as
                                                                                                                                                                                                                    Error);
                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                    err;
                                                                                                                                                                                                                    }
                                                                                                                                                                                                                    };

                                                                                                                                                                                                                    const
                                                                                                                                                                                                                    update
                                                                                                                                                                                                                    =
                                                                                                                                                                                                                    async
                                                                                                                                                                                                                    (id:
                                                                                                                                                                                                                    string,
                                                                                                                                                                                                                    item:
                                                                                                                                                                                                                    any):
                                                                                                                                                                                                                    Promise
                                                                                                                                                                                                                    <<%= pascalCase(spec.id)
                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                        Item>
                                                                                                                                                                                                                        =>
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                        try
                                                                                                                                                                                                                        {
                                                                                                                                                                                                                        setError(null);

                                                                                                                                                                                                                        const
                                                                                                                                                                                                                        response
                                                                                                                                                                                                                        =
                                                                                                                                                                                                                        await
                                                                                                                                                                                                                        httpClient.put(`
                                                                                                                                                                                                                        <%= spec.api.base
                                                                                                                                                                                                                            %>
                                                                                                                                                                                                                            /${id}`,
                                                                                                                                                                                                                            item,
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                            headers
                                                                                                                                                                                                                            });

                                                                                                                                                                                                                            if
                                                                                                                                                                                                                            (response.data.ok)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                            const
                                                                                                                                                                                                                            updatedItem
                                                                                                                                                                                                                            =
                                                                                                                                                                                                                            response.data.data;
                                                                                                                                                                                                                            setData(prev
                                                                                                                                                                                                                            =>
                                                                                                                                                                                                                            prev.map(item
                                                                                                                                                                                                                            =>
                                                                                                                                                                                                                            item.id
                                                                                                                                                                                                                            ===
                                                                                                                                                                                                                            id
                                                                                                                                                                                                                            ?
                                                                                                                                                                                                                            updatedItem
                                                                                                                                                                                                                            :
                                                                                                                                                                                                                            item));
                                                                                                                                                                                                                            return
                                                                                                                                                                                                                            updatedItem;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            else
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                            throw
                                                                                                                                                                                                                            new
                                                                                                                                                                                                                            Error(response.data.error
                                                                                                                                                                                                                            ||
                                                                                                                                                                                                                            'Failed
                                                                                                                                                                                                                            to
                                                                                                                                                                                                                            update
                                                                                                                                                                                                                            item');
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            catch
                                                                                                                                                                                                                            (err)
                                                                                                                                                                                                                            {
                                                                                                                                                                                                                            setError(err
                                                                                                                                                                                                                            as
                                                                                                                                                                                                                            Error);
                                                                                                                                                                                                                            throw
                                                                                                                                                                                                                            err;
                                                                                                                                                                                                                            }
                                                                                                                                                                                                                            };

                                                                                                                                                                                                                            const
                                                                                                                                                                                                                            deleteItem
                                                                                                                                                                                                                            =
                                                                                                                                                                                                                            async
                                                                                                                                                                                                                            (id:
                                                                                                                                                                                                                            string):
                                                                                                                                                                                                                            Promise
                                                                                                                                                                                                                            <void>
                                                                                                                                                                                                                                =>
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                try
                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                setError(null);

                                                                                                                                                                                                                                const
                                                                                                                                                                                                                                response
                                                                                                                                                                                                                                =
                                                                                                                                                                                                                                await
                                                                                                                                                                                                                                httpClient.delete(`
                                                                                                                                                                                                                                <%= spec.api.base
                                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                                    /${id}`,
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                    headers
                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                    if
                                                                                                                                                                                                                                    (response.data.ok)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                    setData(prev
                                                                                                                                                                                                                                    =>
                                                                                                                                                                                                                                    prev.filter(item
                                                                                                                                                                                                                                    =>
                                                                                                                                                                                                                                    item.id
                                                                                                                                                                                                                                    !==
                                                                                                                                                                                                                                    id));
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                                    new
                                                                                                                                                                                                                                    Error(response.data.error
                                                                                                                                                                                                                                    ||
                                                                                                                                                                                                                                    'Failed
                                                                                                                                                                                                                                    to
                                                                                                                                                                                                                                    delete
                                                                                                                                                                                                                                    item');
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    catch
                                                                                                                                                                                                                                    (err)
                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                    setError(err
                                                                                                                                                                                                                                    as
                                                                                                                                                                                                                                    Error);
                                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                                    err;
                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                    };
                                                                                                                                                                                                                                    <% }
                                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                                        <% } else
                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                            %>
                                                                                                                                                                                                                                            //
                                                                                                                                                                                                                                            No
                                                                                                                                                                                                                                            API
                                                                                                                                                                                                                                            -
                                                                                                                                                                                                                                            stub
                                                                                                                                                                                                                                            functions
                                                                                                                                                                                                                                            const
                                                                                                                                                                                                                                            create
                                                                                                                                                                                                                                            =
                                                                                                                                                                                                                                            async
                                                                                                                                                                                                                                            (item:
                                                                                                                                                                                                                                            any):
                                                                                                                                                                                                                                            Promise
                                                                                                                                                                                                                                            <any>
                                                                                                                                                                                                                                                =>
                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                throw
                                                                                                                                                                                                                                                new
                                                                                                                                                                                                                                                Error('No
                                                                                                                                                                                                                                                API
                                                                                                                                                                                                                                                configured
                                                                                                                                                                                                                                                for
                                                                                                                                                                                                                                                this
                                                                                                                                                                                                                                                page');
                                                                                                                                                                                                                                                };

                                                                                                                                                                                                                                                const
                                                                                                                                                                                                                                                update
                                                                                                                                                                                                                                                =
                                                                                                                                                                                                                                                async
                                                                                                                                                                                                                                                (id:
                                                                                                                                                                                                                                                string,
                                                                                                                                                                                                                                                item:
                                                                                                                                                                                                                                                any):
                                                                                                                                                                                                                                                Promise
                                                                                                                                                                                                                                                <any>
                                                                                                                                                                                                                                                    =>
                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                                                    new
                                                                                                                                                                                                                                                    Error('No
                                                                                                                                                                                                                                                    API
                                                                                                                                                                                                                                                    configured
                                                                                                                                                                                                                                                    for
                                                                                                                                                                                                                                                    this
                                                                                                                                                                                                                                                    page');
                                                                                                                                                                                                                                                    };

                                                                                                                                                                                                                                                    const
                                                                                                                                                                                                                                                    deleteItem
                                                                                                                                                                                                                                                    =
                                                                                                                                                                                                                                                    async
                                                                                                                                                                                                                                                    (id:
                                                                                                                                                                                                                                                    string):
                                                                                                                                                                                                                                                    Promise
                                                                                                                                                                                                                                                    <void>
                                                                                                                                                                                                                                                        =>
                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                        throw
                                                                                                                                                                                                                                                        new
                                                                                                                                                                                                                                                        Error('No
                                                                                                                                                                                                                                                        API
                                                                                                                                                                                                                                                        configured
                                                                                                                                                                                                                                                        for
                                                                                                                                                                                                                                                        this
                                                                                                                                                                                                                                                        page');
                                                                                                                                                                                                                                                        };
                                                                                                                                                                                                                                                        <% }
                                                                                                                                                                                                                                                            %>

                                                                                                                                                                                                                                                            const
                                                                                                                                                                                                                                                            refetch
                                                                                                                                                                                                                                                            =
                                                                                                                                                                                                                                                            async
                                                                                                                                                                                                                                                            ()
                                                                                                                                                                                                                                                            =>
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                            await
                                                                                                                                                                                                                                                            fetchData();
                                                                                                                                                                                                                                                            };

                                                                                                                                                                                                                                                            useEffect(()
                                                                                                                                                                                                                                                            =>
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                            if
                                                                                                                                                                                                                                                            (token)
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                            fetchData();
                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                            [token]);

                                                                                                                                                                                                                                                            return
                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                            data,
                                                                                                                                                                                                                                                            isLoading,
                                                                                                                                                                                                                                                            error,
                                                                                                                                                                                                                                                            create,
                                                                                                                                                                                                                                                            update,
                                                                                                                                                                                                                                                            delete:
                                                                                                                                                                                                                                                            deleteItem,
                                                                                                                                                                                                                                                            refetch
                                                                                                                                                                                                                                                            };
                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                            //
                                                                                                                                                                                                                                                            Specific
                                                                                                                                                                                                                                                            API
                                                                                                                                                                                                                                                            functions
                                                                                                                                                                                                                                                            for
                                                                                                                                                                                                                                                            <%= spec.title
                                                                                                                                                                                                                                                                %>
                                                                                                                                                                                                                                                                <% if
                                                                                                                                                                                                                                                                    (spec.api
                                                                                                                                                                                                                                                                    &&
                                                                                                                                                                                                                                                                    spec.api.endpoints)
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                                                                    <%
                                                                                                                                                                                                                                                                        spec.api.endpoints.forEach(endpoint=>
                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                                                                        export
                                                                                                                                                                                                                                                                        async
                                                                                                                                                                                                                                                                        function
                                                                                                                                                                                                                                                                        <%= camelCase(endpoint.method.toLowerCase()
                                                                                                                                                                                                                                                                            + '_'
                                                                                                                                                                                                                                                                            +
                                                                                                                                                                                                                                                                            endpoint.path.replace(/[^a-zA-Z0-9]/g, '_'
                                                                                                                                                                                                                                                                            ))
                                                                                                                                                                                                                                                                            %>
                                                                                                                                                                                                                                                                            (
                                                                                                                                                                                                                                                                            <% if
                                                                                                                                                                                                                                                                                (endpoint.body)
                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                %>
                                                                                                                                                                                                                                                                                body:
                                                                                                                                                                                                                                                                                any,
                                                                                                                                                                                                                                                                                <% }
                                                                                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                                                                                    <% if
                                                                                                                                                                                                                                                                                        (endpoint.query)
                                                                                                                                                                                                                                                                                        {
                                                                                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                                                                                        query:
                                                                                                                                                                                                                                                                                        any,
                                                                                                                                                                                                                                                                                        <% }
                                                                                                                                                                                                                                                                                            %>
                                                                                                                                                                                                                                                                                            token:
                                                                                                                                                                                                                                                                                            string
                                                                                                                                                                                                                                                                                            ):
                                                                                                                                                                                                                                                                                            Promise
                                                                                                                                                                                                                                                                                            <any>
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                const
                                                                                                                                                                                                                                                                                                headers
                                                                                                                                                                                                                                                                                                =
                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                'Authorization':
                                                                                                                                                                                                                                                                                                `Bearer
                                                                                                                                                                                                                                                                                                ${token}`,
                                                                                                                                                                                                                                                                                                'Content-Type':
                                                                                                                                                                                                                                                                                                'application/json'
                                                                                                                                                                                                                                                                                                };

                                                                                                                                                                                                                                                                                                const
                                                                                                                                                                                                                                                                                                response
                                                                                                                                                                                                                                                                                                =
                                                                                                                                                                                                                                                                                                await
                                                                                                                                                                                                                                                                                                httpClient.
                                                                                                                                                                                                                                                                                                <%= endpoint.method.toLowerCase()
                                                                                                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                                                                                                    (
                                                                                                                                                                                                                                                                                                    `
                                                                                                                                                                                                                                                                                                    <%= spec.api.base
                                                                                                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                                                                                                        <%= endpoint.path
                                                                                                                                                                                                                                                                                                            %>
                                                                                                                                                                                                                                                                                                            `,
                                                                                                                                                                                                                                                                                                            <% if
                                                                                                                                                                                                                                                                                                                (endpoint.body)
                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                %>
                                                                                                                                                                                                                                                                                                                body,
                                                                                                                                                                                                                                                                                                                <% }
                                                                                                                                                                                                                                                                                                                    %>
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                    headers
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    );

                                                                                                                                                                                                                                                                                                                    if
                                                                                                                                                                                                                                                                                                                    (!response.data.ok)
                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                    throw
                                                                                                                                                                                                                                                                                                                    new
                                                                                                                                                                                                                                                                                                                    Error(response.data.error
                                                                                                                                                                                                                                                                                                                    ||
                                                                                                                                                                                                                                                                                                                    'Request
                                                                                                                                                                                                                                                                                                                    failed');
                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                    return
                                                                                                                                                                                                                                                                                                                    response.data;
                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                    <% });
                                                                                                                                                                                                                                                                                                                        %>
                                                                                                                                                                                                                                                                                                                        <% }
                                                                                                                                                                                                                                                                                                                            %>

                                                                                                                                                                                                                                                                                                                            //
                                                                                                                                                                                                                                                                                                                            Helper
                                                                                                                                                                                                                                                                                                                            functions
                                                                                                                                                                                                                                                                                                                            function
                                                                                                                                                                                                                                                                                                                            getTypeScriptType(field:
                                                                                                                                                                                                                                                                                                                            any):
                                                                                                                                                                                                                                                                                                                            string
                                                                                                                                                                                                                                                                                                                            {
                                                                                                                                                                                                                                                                                                                            const
                                                                                                                                                                                                                                                                                                                            typeMap:
                                                                                                                                                                                                                                                                                                                            Record
                                                                                                                                                                                                                                                                                                                            <string,
                                                                                                                                                                                                                                                                                                                                string>
                                                                                                                                                                                                                                                                                                                                =
                                                                                                                                                                                                                                                                                                                                {
                                                                                                                                                                                                                                                                                                                                'string':
                                                                                                                                                                                                                                                                                                                                'string',
                                                                                                                                                                                                                                                                                                                                'number':
                                                                                                                                                                                                                                                                                                                                'number',
                                                                                                                                                                                                                                                                                                                                'boolean':
                                                                                                                                                                                                                                                                                                                                'boolean',
                                                                                                                                                                                                                                                                                                                                'datetime':
                                                                                                                                                                                                                                                                                                                                'string',
                                                                                                                                                                                                                                                                                                                                'time':
                                                                                                                                                                                                                                                                                                                                'string',
                                                                                                                                                                                                                                                                                                                                'date':
                                                                                                                                                                                                                                                                                                                                'string',
                                                                                                                                                                                                                                                                                                                                'money':
                                                                                                                                                                                                                                                                                                                                'number',
                                                                                                                                                                                                                                                                                                                                'enum':
                                                                                                                                                                                                                                                                                                                                'string',
                                                                                                                                                                                                                                                                                                                                'array
                                                                                                                                                                                                                                                                                                                                <string>
                                                                                                                                                                                                                                                                                                                                    ':
                                                                                                                                                                                                                                                                                                                                    'string[]'
                                                                                                                                                                                                                                                                                                                                    };
                                                                                                                                                                                                                                                                                                                                    return
                                                                                                                                                                                                                                                                                                                                    typeMap[field.type]
                                                                                                                                                                                                                                                                                                                                    ||
                                                                                                                                                                                                                                                                                                                                    'any';
                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                    function
                                                                                                                                                                                                                                                                                                                                    camelCase(str:
                                                                                                                                                                                                                                                                                                                                    string):
                                                                                                                                                                                                                                                                                                                                    string
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                    return
                                                                                                                                                                                                                                                                                                                                    str.replace(/(?:^\w|[A-Z]|\b\w)/g,
                                                                                                                                                                                                                                                                                                                                    (word,
                                                                                                                                                                                                                                                                                                                                    index)
                                                                                                                                                                                                                                                                                                                                    =>
                                                                                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                                                                                    return
                                                                                                                                                                                                                                                                                                                                    index
                                                                                                                                                                                                                                                                                                                                    ===
                                                                                                                                                                                                                                                                                                                                    0
                                                                                                                                                                                                                                                                                                                                    ?
                                                                                                                                                                                                                                                                                                                                    word.toLowerCase()
                                                                                                                                                                                                                                                                                                                                    :
                                                                                                                                                                                                                                                                                                                                    word.toUpperCase();
                                                                                                                                                                                                                                                                                                                                    }).replace(/\s+/g,
                                                                                                                                                                                                                                                                                                                                    '');
                                                                                                                                                                                                                                                                                                                                    }